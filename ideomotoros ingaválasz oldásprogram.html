<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ing√°s Blokkold√≥ Asszisztens Rendszer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 50%, #fce7f3 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 24px;
            margin-bottom: 24px;
        }
        .header { text-align: center; }
        .header h1 {
            font-size: 2rem;
            color: #9333ea;
            margin-bottom: 8px;
        }
        .header p { color: #6b7280; font-size: 0.875rem; }
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        .progress-bar-container {
            width: 100%;
            height: 12px;
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
            margin-bottom: 16px;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #9333ea, #ec4899);
            transition: width 0.5s ease;
        }
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
            gap: 4px;
            margin-top: 16px;
        }
        .step-icon {
            text-align: center;
            font-size: 1.25rem;
            transition: all 0.3s;
            cursor: pointer;
        }
        .step-icon.active { color: #9333ea; font-weight: bold; transform: scale(1.2); }
        .step-icon.completed { color: #10b981; }
        .step-icon.pending { color: #9ca3af; cursor: not-allowed; }
        .content-card h2 {
            font-size: 1.5rem;
            color: #1f2937;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .info-box {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
        }
        .info-box.blue { background: #eff6ff; border-left: 4px solid #3b82f6; color: #1e40af; }
        .info-box.purple { background: #faf5ff; border-left: 4px solid #a855f7; color: #6b21a8; }
        .info-box.yellow { background: #fefce8; border: 1px solid #fde047; color: #854d0e; }
        .info-box.green { background: #f0fdf4; border: 1px solid #86efac; }
        .btn {
            width: 100%;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-purple { background: #9333ea; color: white; }
        .btn-purple:hover { background: #7e22ce; }
        .btn-secondary { background: #d1d5db; color: #374151; }
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }
        .modal.active { display: flex; align-items: center; justify-content: center; }
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 900px;
            width: 100%;
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }
        .diagram-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }
        .diagram-button {
            background: #faf5ff;
            border: 2px solid #d8b4fe;
            color: #6b21a8;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        .diagram-svg {
            width: 100%;
            max-width: 600px;
            height: auto;
            margin: 20px auto;
            display: block;
        }
        .diagram-sector {
            cursor: pointer;
            transition: all 0.2s;
            stroke-width: 2;
        }
        .diagram-sector:hover, .diagram-sector:active {
            opacity: 1;
            filter: brightness(0.9);
            stroke-width: 3;
        }
        .diagram-text {
            pointer-events: none;
            font-weight: bold;
            fill: #1f2937;
            text-shadow: 0px 0px 4px rgba(255,255,255,0.9), 0px 0px 8px rgba(255,255,255,0.7);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card header">
            <h1>üéØ Ing√°s Blokkold√≥ Asszisztens</h1>
            <p>F√≥kusz ‚Äì Felt√°r√°s ‚Äì Old√°s ‚Äì Integr√°ci√≥</p>
        </div>

        <div class="card">
            <div class="progress-info">
                <span id="stepInfo">Bet√∂lt√©s...</span>
                <span id="percentInfo">0%</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="steps-grid" id="stepsGrid">T√∂lt√©s...</div>
        </div>

        <div class="card content-card" id="contentCard">
            <p>Inicializ√°l√°s...</p>
        </div>

        <div class="card" id="navigationCard" style="display: none;">
            <button class="btn btn-secondary" onclick="prevStep()">‚Üê Vissza</button>
        </div>
    </div>

    <div class="modal" id="diagramModal">
        <div class="modal-content">
            <h3 id="diagramTitle">Diagram</h3>
            <div id="diagramContent"></div>
            <button class="btn btn-secondary" style="margin-top: 16px;" onclick="closeDiagram()">Bez√°r√°s</button>
        </div>
    </div>

    <script>
// Glob√°lis v√°ltoz√≥k
let currentStep = 0;
let completedSteps = [];
let measurements = { initial: null, final: null };

const steps = [
    { id: 0, name: 'R√°hangol√≥d√°s', icon: 'üéØ' },
    { id: 1, name: 'Enged√©lyez√©s', icon: '‚úã', diagram: 'igenNem' },
    { id: 2, name: 'Kezdeti m√©r√©s', icon: 'üìä', diagram: 'szazalek' },
    { id: 3, name: '√âletter√ºlet', icon: 'üåç', diagram: 'eletterulet' },
    { id: 4, name: '√ârzelmi Gy√∂k√©r', icon: 'üå±', diagram: 'erzelmGyoker' },
    { id: 5, name: 'Negat√≠v √ârzelem', icon: 'üí≠', diagram: 'erzelem' },
    { id: 6, name: 'Trauma', icon: 'üîç', diagram: 'trauma' },
    { id: 7, name: 'Lelki S√©r√ºl√©s', icon: 'üíî', diagram: 'lelkiSerules' },
    { id: 8, name: 'Kapcsolati Gy√∂k√©r', icon: 'üë•', diagram: 'kapcsolat' },
    { id: 9, name: 'Blokk Eredete', icon: '‚è≥', diagram: 'eredet' },
    { id: 10, name: 'Hiedelmek', icon: 'üß†', diagram: 'hiedelem' },
    { id: 11, name: 'Testi √ârintetts√©g', icon: 'ü´Ä', diagram: 'test' },
    { id: 12, name: 'Csakra', icon: 'üåà', diagram: 'csakra' },
    { id: 13, name: 'Blokk Jellege', icon: 'üî∑', diagram: 'blokkJelleg' },
    { id: 14, name: 'V√©dekez√©s', icon: 'üõ°Ô∏è', diagram: 'vedekezes' },
    { id: 15, name: '√âletszerep', icon: 'üé≠', diagram: 'szerepek' },
    { id: 16, name: 'Szabot√°zs', icon: 'üö´', diagram: 'szabotazs' },
    { id: 17, name: 'M√°sodl. Haszon', icon: 'üîê', diagram: 'haszon' },
    { id: 18, name: 'Fogadalmak', icon: 'üïäÔ∏è', diagram: 'fogadalom' },
    { id: 19, name: 'Mikroszk√≥p', icon: 'üî¨', diagram: 'mikroszkop' },
    { id: 20, name: 'K√©sz√ºlts√©g', icon: '‚ö°', diagram: 'igenNem' },
    { id: 21, name: 'Old√°s', icon: '‚ú®' },
    { id: 22, name: 'Pozit√≠v √ârzelem', icon: 'üòä', diagram: 'pozitivErzelem' },
    { id: 23, name: '√öj Hit', icon: 'üí´', diagram: 'ujHit' },
    { id: 24, name: 'Sz√≠nek', icon: 'üé®', diagram: 'szinek' },
    { id: 25, name: 'Krist√°lyok', icon: 'üíé', diagram: 'kristaly' },
    { id: 26, name: 'Z√°r√≥ m√©r√©s', icon: 'üìà', diagram: 'szazalek' },
    { id: 27, name: 'Old√≥ Sz√∂vegek', icon: 'üìñ' },
    { id: 28, name: 'Lez√°r√°s', icon: 'üôè', diagram: 'igenNem' }
];

const diagrams = {
    igenNem: { 
        title: 'Igen - Nem - Nem most', 
        options: ['IGEN', 'NEM', 'NEM MOST'],
        colors: ['#bbf7d0', '#fecaca', '#fde68a']
    },
    szazalek: { 
        title: 'Sz√°zal√©kos m√©r√©s', 
        options: ['0%','10%','20%','30%','40%','50%','60%','70%','80%','90%','100%'],
        colors: ['#fecaca','#fed7aa','#fde68a','#fef3c7','#d9f99d','#bbf7d0','#a7f3d0','#99f6e4','#a5f3fc','#bfdbfe','#c7d2fe']
    },
    eletterulet: { 
        title: '√âletter√ºletek', 
        options: ['Munka/Karrier', 'P√©nz√ºgyek', 'Szerelem', 'Csal√°d', 'Eg√©szs√©g', 'Bar√°ts√°gok', 'Spiritualit√°s', 'Otthon', 'Szabadid≈ë', 'Kreativit√°s'],
        colors: ['#fecaca','#fed7aa','#fde68a','#d9f99d','#bbf7d0','#99f6e4','#bfdbfe','#c7d2fe','#ddd6fe','#e9d5ff']
    },
    erzelmGyoker: {
        title: '√ârzelmi Gy√∂k√©r',
        options: ['F√©lelem/Szorong√°s', 'Harag/D√ºh', 'Szomor√∫s√°g/Gy√°sz', '√ñr√∂m (elfojtott)', 'Szeretet (hi√°nya)', 'Bizalom (hi√°nya)', 'B≈±ntudat', 'Sz√©gyen', 'Megvet√©s', 'Undor', 'Meglepet√©s (trauma)', 'V√°gy/Hi√°ny', '√ârzelmi zsibbad√°s', 'F√°jdalom', 'Rejtett v√°gy'],
        colors: ['#fca5a5', '#fecaca', '#bfdbfe', '#fde68a', '#fbcfe8', '#d1d5db', '#fed7aa', '#fcd34d', '#ddd6fe', '#99f6e4', '#fef3c7', '#f9a8d4', '#e5e7eb', '#fca5a5', '#f5d0fe']
    },
    erzelem: { 
        title: 'Negat√≠v √ârzelmek', 
        options: ['Harag/D√ºh', 'Szomor√∫s√°g/B√°nat', 'F√©lelem/Aggodalom', 'B≈±ntudat/Sz√©gyen', 'Frusztr√°ci√≥', 'Irigys√©g', 'Elhagyatotts√°g', 'Rem√©nytelens√©g'],
        colors: ['#fecaca','#fca5a5','#fcd5d5','#fed7aa','#fecaca','#fca5a5','#fecdd3','#fca5a5']
    },
    trauma: {
        title: 'Trauma M√©ly√≠t√©s',
        options: ['Gyerekkori trauma', 'B√°ntalmaz√°s', 'Elhanyagol√°s', 'Szexu√°lis trauma', '√ârzelmi manipul√°ci√≥', 'Csal√°di konfliktus', 'V√°l√°s', 'Hal√°leset', 'Vesztes√©g', 'Baleset', 'Betegs√©g', 'Bullying', 'El√°rul√°s', 'Ism√©tl≈ëd≈ë kudarc', '√ñr√∂kl√∂tt trauma'],
        colors: ['#fca5a5','#fcd5d5','#fecaca','#fecdd3','#fca5a5','#fed7aa','#fde68a','#fecaca','#fca5a5','#fcd5d5','#fed7aa','#fecaca','#fca5a5','#fcd5d5','#fecdd3']
    },
    lelkiSerules: {
        title: 'Lelki S√©r√ºl√©sek',
        options: ['Elutas√≠t√°s', 'Elhagy√°s', 'Megal√°z√°s', '√Årul√°s', 'Igazs√°gtalans√°g', 'Nem l√°tsz√°s', 'Nem hallgat√°s', '√ârzelmi elhanyagol√°s', 'Fizikai elhanyagol√°s', 'T√∫lv√©d√©s', 'Inv√°zi√≥', 'Infantiliz√°l√°s', 'Parentifik√°ci√≥', 'B≈±nbakk√©pz√©s', 'Kirekeszt√©s', '√ârzelmi zsarol√°s', 'Gaslighting', 'Kritika/Len√©z√©s', '√ñsszehasonl√≠t√°s', 'Felt√©teles szeretet'],
        colors: ['#fca5a5', '#fcd34d', '#fdba74', '#d8b4fe', '#bfdbfe', '#a5f3fc', '#99f6e4', '#bbf7d0', '#fde68a', '#fecaca', '#ddd6fe', '#e9d5ff', '#fbcfe8', '#fecdd3', '#fed7aa', '#fef3c7', '#ccfbf1', '#c7d2fe', '#ddd6fe', '#fbcfe8']
    },
    kapcsolat: {
        title: 'Kapcsolati Gy√∂k√©r',
        options: ['Anya', 'Apa', 'Testv√©r', 'Gyerek', 'Partner', 'H√°zast√°rs', 'Volt partner', 'Bar√°t', 'Koll√©ga', 'F≈ën√∂k', 'Tan√°r', 'Mentor', 'Nagysz√ºl≈ë', 'Rokon'],
        colors: ['#fbcfe8','#bfdbfe','#bbf7d0','#fde68a','#fecaca','#fca5a5','#fcd5d5','#a7f3d0','#c7d2fe','#e9d5ff','#ddd6fe','#d8b4fe','#fed7aa','#fcd34d']
    },
    eredet: {
        title: 'Blokk Eredete',
        options: ['0-3 √©v', '3-7 √©v', '7-14 √©v', '14-21 √©v', '21-35 √©v', '35-50 √©v', '50+ √©v', 'M√©hen bel√ºl', 'Sz√ºlet√©s', 'Korai gyerek', 'Iskol√°s kor', 'Pubert√°s', 'Fiatal feln≈ëtt', 'M√∫lt √©let', 'Gener√°ci√≥s'],
        colors: ['#fecaca','#fed7aa','#fde68a','#d9f99d','#bbf7d0','#a7f3d0','#99f6e4','#fca5a5','#fcd5d5','#fecaca','#fed7aa','#fde68a','#d9f99d','#ddd6fe','#e9d5ff']
    },
    hiedelem: { 
        title: 'Korl√°toz√≥ Hiedelmek', 
        options: ['Nem vagyok el√©g j√≥', 'Nem √©rdemlem meg', 'Nem vagyok szerethet≈ë', 'Gyenge vagyok', 'Mindig kudarcot vallok', 'Vesz√©lyes a siker', 'Nem lehetek boldog', 'Nem vagyok tehets√©ges', 'Sosem v√°ltozhatok'],
        colors: ['#d1d5db','#e5e7eb','#d1d5db','#e5e7eb','#d1d5db','#e5e7eb','#d1d5db','#e5e7eb','#d1d5db']
    },
    test: { 
        title: 'Testt√°j√©kok', 
        options: ['Fej/Agy', 'Torok/Nyak', 'Sz√≠v/Mellkas', 'Gyomor/Has', 'M√°j/Epeh√≥lyag', 'Vese', 'H√°t/Gerinc', 'Der√©k/√Ågy√©k', 'Cs√≠p≈ë/Medence', 'V√©gtagok'],
        colors: ['#e9d5ff','#ddd6fe','#d8b4fe','#e9d5ff','#f3e8ff','#d8b4fe','#ddd6fe','#e9d5ff','#e0d5f5','#d4c5f9']
    },
    csakra: {
        title: 'Csakr√°k',
        options: ['Gy√∂k√©r csakra', 'Szakr√°lis csakra', 'Napfonat csakra', 'Sz√≠v csakra', 'Torok csakra', '3. szem', 'Korona csakra'],
        colors: ['#fecaca','#fed7aa','#fde68a','#bbf7d0','#bfdbfe','#ddd6fe','#e9d5ff']
    },
    blokkJelleg: {
        title: 'Blokk Jellege',
        options: ['√ârzelmi blokk', 'Ment√°lis blokk', 'Fizikai blokk', 'Energetikai blokk', 'Spiritu√°lis blokk', 'Karmikus blokk', 'Lelki blokk', 'Csal√°di blokk'],
        colors: ['#fecaca','#fed7aa','#fde68a','#fef3c7','#d9f99d','#bbf7d0','#a7f3d0','#99f6e4']
    },
    vedekezes: {
        title: 'V√©dekez√©si Mechanizmus',
        options: ['Tagad√°s', 'Elfojt√°s', 'Projekci√≥', 'Racionaliz√°l√°s', 'Kompenz√°ci√≥', 'Elker√ºl√©s', 'Agresszi√≥', 'Perfekcionizmus', 'Kontroll', 'Addikci√≥', 'Disszoci√°ci√≥', 'Humor'],
        colors: ['#fca5a5','#fcd5d5','#fecaca','#fecdd3','#fca5a5','#fed7aa','#fde68a','#fef3c7','#fef9d5','#d9f99d','#bbf7d0','#d9f99d']
    },
    szerepek: {
        title: '√âletszerepek',
        options: ['Sz√ºl≈ë szerepben', 'Partner szerepben', 'Munkav√°llal√≥', 'Vezet≈ë szerepben', 'Gyerek szerepben', 'Bar√°t szerepben', 'Koll√©ga szerepben', 'Egyed√ºl/Mag√°n√©let', 'K√∂z√∂ss√©gben', 'Kreat√≠v/Alkot√≥'],
        colors: ['#fbcfe8','#fecaca','#fde68a','#fef3c7','#d9f99d','#bbf7d0','#99f6e4','#bfdbfe','#c7d2fe','#e9d5ff']
    },
    szabotazs: {
        title: 'Szabot√°zs Mint√°k',
        options: ['Halogat√°s', 'T√∂k√©letes√≠t√©s', 'F√©lbehagy√°s', '√ñnkritika', 'T√∫lv√°llal√°s', 'Kontroll ig√©nye', '√ñsszehasonl√≠t√°s', 'K√ºzdelem', 'Gyors felad√°s', 'Menek√ºl√©s', 'Nincs szabot√°zs'],
        colors: ['#fca5a5','#fcd5d5','#fecaca','#fecdd3','#fca5a5','#fed7aa','#fde68a','#fef3c7','#fef9d5','#d9f99d','#bbf7d0']
    },
    haszon: {
        title: 'M√°sodlagos Haszon',
        options: ['Biztons√°got ad', 'Identit√°st ad', 'Figyelmet kapok', 'Szeretetet kapok', 'Nem kell v√°ltoznom', 'Nem kell felel≈ëss√©g', 'Elker√ºl√∂m kudarcot', 'V√©delmez m√°sok el≈ël'],
        colors: ['#fde68a','#fed7aa','#fecaca','#fbcfe8','#f5d0fe','#e9d5ff','#ddd6fe','#d8b4fe']
    },
    fogadalom: {
        title: 'Fogadalmak',
        options: ['Soha nem leszek mint ≈ë', 'Mindig v√©deni fogom magam', 'Soha nem engedem meg', 'Mindig er≈ës leszek', 'Soha nem b√≠zom', 'Mindig egyed√ºl csin√°lom', 'Soha nem fogok s√≠rni', 'Mindig kontroll alatt', '√ñr√∂k h≈±s√©g', 'Csal√°di fogadalom', 'Vall√°si fogadalom', 'L√©lek szerz≈ëd√©s', 'Nincs fogadalom'],
        colors: ['#fca5a5','#fcd5d5','#fecaca','#fecdd3','#fca5a5','#fed7aa','#fde68a','#fef3c7','#fbcfe8','#ddd6fe','#d8b4fe','#a5f3fc','#bbf7d0']
    },
    mikroszkop: {
        title: 'Mikroszk√≥p - Tov√°bbi r√©szletek',
        options: ['Csal√°di minta', 'T√°rsadalmi kondicion√°l√°s', 'Kultur√°lis elv√°r√°s', 'Nemi szerep', 'Vall√°si tan√≠t√°s', 'Iskolai tapasztalat', 'M√©dia hat√°s', 'Kort√°rs nyom√°s', 'T√∂rt√©nelmi trauma', 'Kollekt√≠v tudattalan', '≈ês√∂k √∂r√∂ks√©ge', 'Gazdas√°gi k√∂r√ºlm√©nyek', 'Politikai k√∂rnyezet', 'Etnikai identit√°s', 'T√°rsadalmi oszt√°ly', 'F√∂ldrajzi elhelyezked√©s', 'Nyelvi befoly√°s', 'Technol√≥giai hat√°s', 'Sz√ºl≈ëi elv√°r√°sok', 'Testv√©rrivaliz√°ci√≥', 'Iskolai bullying', 'Munkahelyi kult√∫ra', 'Kapcsolati dinamika', 'Szexu√°lis identit√°s', 'Testi k√©pzavar', 'P√©nz√ºgyi trauma', 'Vesztes√©g/gy√°sz', 'H√°bor√∫s trauma', 'Migr√°ci√≥s √©lm√©ny', 'Nincs t√∂bb r√©szlet'],
        colors: ['#fecaca','#fed7aa','#fde68a','#fef3c7','#d9f99d','#bbf7d0','#99f6e4','#a5f3fc','#bfdbfe','#c7d2fe','#ddd6fe','#e9d5ff','#f5d0fe','#fce7f3','#fbcfe8','#fed7aa','#fef3c7','#fef9d5','#d9f99d','#bbf7d0','#a7f3d0','#99f6e4','#ccfbf1','#bfdbfe','#d4dfff','#e9d5ff','#f0e5ff','#fce7f3','#fdf2f8','#bbf7d0']
    },
    pozitivErzelem: {
        title: 'Pozit√≠v √ârzelmek',
        options: ['√ñr√∂m', 'B√©ke', 'Szeretet', 'H√°la', 'Szabads√°g', 'Bizalom', 'B√°tors√°g', 'Rem√©ny', 'Lelkesed√©s', 'Megel√©gedetts√©g', 'Biztons√°g', 'K√∂nnyeds√©g'],
        colors: ['#fef3c7','#fef9d5','#fef3c7','#fde68a','#fed7aa','#fcd34d','#fef3c7','#fef9d5','#fef9c3','#d9f99d','#bbf7d0','#d9f99d']
    },
    ujHit: {
        title: '√öj Hiedelmek',
        options: ['El√©g j√≥ vagyok', 'Meg√©rdemlem a j√≥t', 'Szerethet≈ë vagyok', 'Er≈ës vagyok', 'Sikereket √©rek el', 'Biztons√°gos a siker', 'Boldog lehetek', 'Tehets√©ges vagyok', 'V√°ltozhatok √©s fejl≈ëdhetek', 'B√≠zom magamban', 'Elfogadom magam', 'Megbocs√°tok magamnak'],
        colors: ['#bbf7d0','#a7f3d0','#99f6e4','#99f6e4','#a5f3fc','#bfdbfe','#a5f3fc','#bfdbfe','#c7d2fe','#bfdbfe','#c7d2fe','#ddd6fe']
    },
    szinek: {
        title: 'Gy√≥gy√≠t√≥ Sz√≠nek',
        options: ['Feh√©r (tisztas√°g)', 'Arany (b√∂lcsess√©g)', 'Ez√ºst (intu√≠ci√≥)', 'Lila (spiritualit√°s)', 'K√©k (kommunik√°ci√≥)', 'Z√∂ld (gy√≥gyul√°s)', 'R√≥zsasz√≠n (szeretet)', 'Narancss√°rga (kreativit√°s)', 'S√°rga (√∂r√∂m)', 'T√ºrkiz (v√©delem)'],
        colors: ['#fafafa','#fef3c7','#e5e7eb','#e9d5ff','#bfdbfe','#bbf7d0','#fbcfe8','#fed7aa','#fef3c7','#99f6e4']
    },
    kristaly: {
        title: 'Gy√≥gy√≠t√≥ Krist√°lyok',
        options: ['Hegyikrist√°ly', 'Ametiszt', 'R√≥zsakvarc', 'Citrin', 'T√ºrkiz', 'Labradorit', 'Fekete turmalin', 'Szelenit', 'Karneol', 'Lapis lazuli', 'Malachit', 'J√°spis'],
        colors: ['#fafafa','#e9d5ff','#fef3c7','#fef9d5','#99f6e4','#c7d2fe','#d1d5db','#fefefe','#fed7aa','#bfdbfe','#bbf7d0','#fecaca']
    }
};

function renderStepsGrid() {
    const grid = document.getElementById('stepsGrid');
    grid.innerHTML = steps.map(step => {
        const status = completedSteps.includes(step.id) ? 'completed' : 
                      (step.id === currentStep ? 'active' : 'pending');
        return `<div class="step-icon ${status}">${step.icon}</div>`;
    }).join('');
}

function updateProgress() {
    const total = steps.length;
    const current = currentStep + 1;
    const percent = Math.round((current / total) * 100);
    document.getElementById('stepInfo').textContent = `${current} / ${total} l√©p√©s`;
    document.getElementById('percentInfo').textContent = `${percent}%`;
    document.getElementById('progressBar').style.width = `${percent}%`;
}

function renderContent() {
    const step = steps[currentStep];
    let html = '';
    
    if (currentStep === 0) {
        html = `<h2>üéØ R√°hangol√≥d√°s</h2>
            <div class="info-box purple">
                <strong>K√©sz√ºlj fel a munk√°ra</strong><br>
                √úlj k√©nyelmesen, l√©legezz m√©lyet, √©s tartsd kezedben az ing√°t.
            </div>
            <p style="line-height: 1.8; color: #374151; margin-bottom: 24px;">
                Koncentr√°lj a feldolgozand√≥ t√©m√°ra. K√©rd meg tudatalattid, hogy vezessen.
            </p>
            <button class="btn btn-primary" onclick="nextStep()">Tov√°bb ‚Üí</button>`;
    } else if (currentStep === 21) {
        html = `<h2>‚ú® Old√°s</h2>
            <div class="info-box green" style="color: #065f46;">
                <strong>Mehet az old√°s!</strong><br>
                Most k√∂vetkezik a transzform√°ci√≥ pillanata.
            </div>
            <p style="line-height: 1.8; color: #374151; margin-bottom: 24px;">
                üåü "Tisztelettel elengedem ezt a blokkot, √©s h√°l√°s vagyok a tan√≠t√°s√©rt."<br><br>
                üåü "Megbocs√°tok magamnak √©s mindenkinek."<br><br>
                üåü "F√©ny √©s szeretet √°ramlik √°t rajtam."<br><br>
                Mondd ki hangosan vagy gondolatban 3x.
            </p>
            <button class="btn btn-primary" onclick="nextStep()">Old√°s megt√∂rt√©nt ‚Üí</button>`;
    } else if (currentStep === 27) {
        html = `<h2>üìñ Old√≥ Sz√∂vegek</h2>
            <p style="color: #6b7280; margin-bottom: 24px;">V√°lassz kateg√≥ri√°t meger≈ës√≠t≈ë sz√∂vegekhez</p>
            <div class="diagram-grid">
                <button class="diagram-button">√ñnbizalom</button>
                <button class="diagram-button">Megbocs√°t√°s</button>
                <button class="diagram-button">Szeretet</button>
                <button class="diagram-button">Szabads√°g</button>
            </div>
            <button class="btn btn-primary" style="margin-top: 24px;" onclick="nextStep()">Tov√°bb ‚Üí</button>`;
    } else if (currentStep === 28) {
        const initial = measurements.initial || 'N/A';
        const final = measurements.final || 'N/A';
        html = `<h2>üôè Lez√°r√°s √©s Integr√°ci√≥</h2>
            <div class="info-box green" style="color: #065f46;">
                <strong>Gratul√°lunk a munk√°dhoz!</strong>
            </div>
            <p style="line-height: 1.8; color: #374151; margin-bottom: 24px;">
                <strong>Kezdeti intenzit√°s:</strong> ${initial}<br>
                <strong>Z√°r√≥ intenzit√°s:</strong> ${final}<br><br>
                ‚Ä¢ Igy√°l egy poh√°r vizet<br>
                ‚Ä¢ Jegyzetelj, ha szeretn√©l<br>
                ‚Ä¢ Figyeld a v√°ltoz√°sokat a k√∂vetkez≈ë napokban
            </p>
            <button class="btn btn-secondary" onclick="reset()">√öj munkamenet ind√≠t√°sa</button>`;
    } else if (step.diagram) {
        html = `<h2>${step.icon} ${step.name}</h2>
            <div class="info-box blue">Haszn√°ld az ing√°t a v√°laszad√°shoz</div>
            <p style="line-height: 1.8; color: #374151; margin-bottom: 24px;">
                K√©rd meg az ing√°t, hogy mutassa meg a(z) <strong>${step.name.toLowerCase()}</strong> ter√ºlet√©t.
            </p>
            <button class="btn btn-purple" onclick="openDiagram('${step.diagram}')">Diagram megnyit√°sa</button>`;
    } else {
        html = `<h2>${step.icon} ${step.name}</h2>
            <p>Folytat√°s...</p>
            <button class="btn btn-primary" onclick="nextStep()">Tov√°bb ‚Üí</button>`;
    }
    
    document.getElementById('contentCard').innerHTML = html;
    document.getElementById('navigationCard').style.display = currentStep > 0 ? 'block' : 'none';
}

function nextStep() {
    if (currentStep < steps.length - 1) {
        if (!completedSteps.includes(currentStep)) {
            completedSteps.push(currentStep);
        }
        currentStep++;
        renderStepsGrid();
        renderContent();
        updateProgress();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

function prevStep() {
    if (currentStep > 0) {
        currentStep--;
        renderStepsGrid();
        renderContent();
        updateProgress();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

function openDiagram(type) {
    const diag = diagrams[type];
    document.getElementById('diagramTitle').textContent = diag.title;
    
    let html = '';
    
    // K√∂rk√∂r√∂s diagram l√©trehoz√°sa
    if (type !== 'igenNem') {
        html += createCircleDiagram(diag);
    } else {
        html += createSimpleDiagram(diag);
    }
    
    // Gombok list√°ja
    html += '<div class="diagram-grid" style="margin-top: 24px;">';
    diag.options.forEach((opt, i) => {
        const escaped = opt.replace(/'/g, '&#39;').replace(/"/g, '&quot;');
        html += `<button class="diagram-button" onclick="selectOption('${escaped}')">${opt}</button>`;
    });
    html += '</div>';
    html += '<button class="btn btn-secondary" style="margin-top: 16px;" onclick="skipDiagram()">Kihagy√°s (nincs v√°lasz)</button>';
    
    document.getElementById('diagramContent').innerHTML = html;
    document.getElementById('diagramModal').classList.add('active');
}

function createCircleDiagram(diag) {
    const opts = diag.options;
    const colors = diag.colors;
    const angleStep = 360 / opts.length;
    const centerX = 300, centerY = 300, radius = 250;
    
    let paths = '';
    
    opts.forEach((opt, i) => {
        const angle1 = (i * angleStep - 90) * Math.PI / 180;
        const angle2 = ((i + 1) * angleStep - 90) * Math.PI / 180;
        const x1 = centerX + radius * Math.cos(angle1);
        const y1 = centerY + radius * Math.sin(angle1);
        const x2 = centerX + radius * Math.cos(angle2);
        const y2 = centerY + radius * Math.sin(angle2);
        
        const midAngle = (angle1 + angle2) / 2;
        const textRadius = radius * 0.7;
        const textX = centerX + textRadius * Math.cos(midAngle);
        const textY = centerY + textRadius * Math.sin(midAngle);
        
        let rotationAngle = (midAngle * 180 / Math.PI);
        if (rotationAngle > 90 && rotationAngle < 270) {
            rotationAngle += 180;
        }
        
        const textLength = opt.length;
        const fontSize = textLength > 20 ? 8 : (textLength > 15 ? 9 : (textLength > 10 ? 10 : 11));
        
        const escaped = opt.replace(/'/g, '&#39;').replace(/"/g, '&quot;');
        
        paths += `<path class="diagram-sector" d="M${centerX},${centerY} L${x1},${y1} A${radius},${radius} 0 0,1 ${x2},${y2} Z" 
                  fill="${colors[i]}" opacity="0.85" stroke="#fff" 
                  onclick="selectOption('${escaped}')"/>`;
        paths += `<text class="diagram-text" x="${textX}" y="${textY}" 
                  font-size="${fontSize}px" text-anchor="middle" dominant-baseline="middle" 
                  transform="rotate(${rotationAngle} ${textX} ${textY})">${opt}</text>`;
    });
    
    return `<svg class="diagram-svg" viewBox="0 0 600 600">${paths}</svg>`;
}

function createSimpleDiagram(diag) {
    let html = '<div class="diagram-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-top: 24px;">';
    diag.options.forEach((opt, i) => {
        const escaped = opt.replace(/'/g, '&#39;').replace(/"/g, '&quot;');
        html += `<button class="diagram-button" style="padding: 24px; font-size: 1.1rem; background: ${diag.colors[i]}; color: #1f2937; border-color: ${diag.colors[i]};" 
                 onclick="selectOption('${escaped}')">${opt}</button>`;
    });
    html += '</div>';
    return html;
}

function selectOption(option) {
    if (currentStep === 2) {
        measurements.initial = option;
    } else if (currentStep === 26) {
        measurements.final = option;
    }
    closeDiagram();
    nextStep();
}

function skipDiagram() {
    closeDiagram();
    nextStep();
}

function closeDiagram() {
    document.getElementById('diagramModal').classList.remove('active');
}

function reset() {
    currentStep = 0;
    completedSteps = [];
    measurements = { initial: null, final: null };
    renderStepsGrid();
    renderContent();
    updateProgress();
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Inicializ√°l√°s
window.addEventListener('DOMContentLoaded', function() {
    console.log('App starting...');
    renderStepsGrid();
    renderContent();
    updateProgress();
    console.log('App loaded successfully!');
});
    </script>
</body>
</html>